<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<link rel="stylesheet" type="text/css" href="../lib/bootstrap-3.3.7/dist/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="../css/font/iconfont.css">
	<link rel="stylesheet" type="text/css" href="../css/base.css">
	<link rel="stylesheet" type="text/css" href="../css/top.css">
	<link rel="stylesheet" type="text/css" href="../css/foot.css">
	<link rel="stylesheet" type="text/css" href="../css/goCar.css">
	<link rel="stylesheet" type="text/css" href="../css/loginRegi.css">

	<script src="../js/jquery-3.2.1.js"></script>
	<script src="../lib/bootstrap-3.3.7/dist/js/bootstrap.js"></script>
	<script type="text/javascript" src="../js/common.js"></script>
	<script type="text/javascript">
		jQuery($=>{
			$('.header').load('../html/loginheader.html');
			$('.footer').load('../html/innerfoot.html');

			var num=randomNumber(1000,9999);
			$('.identity').val(`${num}`);
			function panding(){

				var phone=$('.phone ').val();
			
				if(!/^1[3-9]\d{9}$/.test(phone)){
					alert('手机号不合法');
					return false;
				}

				var password=$('.password ').val();
				if(!/^\S{6,20}$/.test(password)){
					alert('密码不能有空格');
					return false;
				}

				var confirmpassword=$('.cofirmwpassword').val();
					console.log(password,confirmpassword);
				if(confirmpassword != password){
					alert('两次输入密码不一致');
					return false;
				}

				var identity=$('.identity').val();
				var phoneidentity=$('.phoneidentity ').val();
				if(identity!=phoneidentity){
					alert('验证码输入有误');
					return false;
				}
				return true;
			}

			$('.check').on('click',function(){
				$(function(){
					var state=panding();
					console.log(state);
					if(state){
						var phone=$('.phone ').val();
						var password=$('.password ').val();
						 $.ajax({
				            url: "../api/register.php", 
				            type: "post",
				            data: {phone:phone,password:password
				          	},
				            success:function(data){
				               
							window.location.reload();
				                },
				            error:function(e){
				                alert('ajax hava an error');
				                }, 
				            complete:function(e){
				                }
        					});  
					}
				})
			})
		})
	</script>

</head>
<body>
		
	<header class="header"></header>
	<main>
		<div class="container1000">
			<div class="regi-title">
				<span>注册会员</span>
			</div>
			<div class="regi-content">		
			<img src="http://staging.www.fruitday.com/images/common/huiyuan.jpg">
			<span><a href="login.html">会员登录></a></span>
			<ul>
				<li>
					<div><span>手机号</span></div>  <div ><input class="phone" type="" name=""></div>
				</li>
				<li>
					<div><span>密码</span></div>    <div ><input class="password" type="password" name=""></div>
				</li>
				<li>
					<div><span>确认密码</span></div><div ><input class="cofirmwpassword" type="password" name=""></div>
				</li>
				<li>
						<div><span >验证码</span></div><div ><input class="identity" type="" name=""></div>
				</li>
				<li>
					<div><span>手机验证码</span></div><div ><input class="phoneidentity" type="" name=""></div>
				</li>
				<li ><button class="check">注册</button><button><a href="login.html">会员登录</a></button></li>
			</ul>
			
			</div>
		</div>
	</main>
	<footer class="footer"></footer>
	
</body>
</html>